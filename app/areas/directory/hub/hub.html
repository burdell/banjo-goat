
<div class="cmuFeed cmuFeed--hub">
	<community-page-header hide-element-selector=".hub-container"></community-page-header>

	<div class="hub-container">

		<div class="row">

			<!-- main -->
			<div class="cmuFeed__main col--md9 noPaddingLeft">

				<!-- story feed -->
				<div class="cmuFeed__container" ng-if="vm.storyList.length > 0">
		        	<div class="cmuFeed__title clearfix">
		        		<div class="col--md10">
							<h5><span class="cmuIcon__label stories"></span>Popular {{ vm.nodeDisplay }} Stories</h5>
						</div>
					</div>

					<div class="cmuFeed__storyList col--md12 noPaddingLeft noPaddingRight">
						<div class="col--md3" ng-repeat="story in vm.storyList">
							<story-display 
								story="story"
								minimal-display="true"
								hide-posting-info="false"
								fill-width="true">
							</story-display>
						</div>
					</div>
					<div>
						<a ng-href="{{ vm.productStoriesUrl }}" target="_self" class="button button--ghost">Read All Stories</a>
					</div>
				</div>

				<!-- activity feed -->
				<div class="cmuFeed__container">
					<div class="cmuFeed__title clearfix">
		        		<div class="col--md12">
							<h5><span class="cmuIcon__label all"></span>Popular {{ vm.nodeDisplay }} Discussions</h5>
						</div>
					</div>

					<div class="cmuFeed__items">
						<div class="cmuFeed__item__container" ng-repeat="feedItem in vm.discussionsFeed">
			        		<community-feed-content content-model="feedItem"></community-feed-content>
			        	</div>
					</div>

					<community-load-more
						list-model="vm.discussionsFeed"
						load-text="Read More"
						load-filter="vm.discussionsFeedFilter">
					</community-load-more>
				</div>
			</div>

			<!-- sidebar -->
			<div class="cmuFeed__sidebar cmuFeed__sidebar--hub col--md3">
				<div class="cmuFeed__pulse cmuFeed__sidebar__item">
					<h5>{{ vm.nodeDisplay }} Pulse</h5>
					<community-pulse class="cmuPulse--sidebar"></community-pulse>
				</div>

				<div class="cmuFeed__announcements cmuFeed__sidebar__item">
					<h5>Latest Announcements</h5>
					<a class="cmuFeed__anno" ng-repeat="announcement in vm.recentAnnouncements" ng-href="{{ vm.generateAnnouncementUrl(announcement) }}" target="_self">
						<span class="product"></span>{{ announcement.topic.subject }}
					</a>
					<div class="cmuFeed__sidebar__ctrl">
						<a class="cmuFeed__sidebar__link" ng-href="{{ vm.productAnnouncementsUrl }}" target="_self">All Announcements</a>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>