<div class="cmuForumContainer">

  <div class="cmuForumIntro">
    <div class="row">
      <div class="cmuForumDescriptor col--md9">FORUMS are the central hub of our community discussions and chatter. Voice your opinion, show what you're working on, and check out the cool things others are doing. And remember, we are all here to help each other!
      </div>
      <div class="col--md3 noPaddingRight">
        <div ng-hide="vm.hideSearch()">
            <community-search 
              search-filter="vm.forumListFilter" 
              placeholder="Filter Topics"
              exclude="limit, offset">
           </community-search>
        </div>
      </div>
    </div>
  </div>

  <div class="forumThreadcount">
    <div class="row">
      <h4>Showing {{ vm.messageCount }} Results for {{ ::vm.currentNode.name }}</h4>
    </div>
  </div>


  <div class="forumThreadControl">
    <div class="row">
      <div class="col--md10">
        <button class="button-full button-blue-white" ng-click="vm.startNewTopic()">Start a Topic</button>
      </div>
      <div class="col--md2">
        <community-sort sort-options="vm.messageSortOptions" sort-filter="vm.forumListFilter" sort-exclude="offset" class="community__sort"></community-sort>
      </div>
    </div>
  </div>


  <div class="forumThreadList">
    <div class="row">
      <table>
        <thead>
          <th class="forumThreadList__head--topic">Topic</th>
          <th class="forumThreadList__head--counter">Views</th>
          <th class="forumThreadList__head--counter">Replies</th>
          <th class="forumThreadList__head--counter">Kudos</th>
          <th class="forumThreadList__head--reply">Latest Reply</th>
        </thead>

        <tbody>
          <tr class="forumThreadList__message" ng-repeat="message in vm.messageList">
            <td class="forumThreadList__message__topic">
              <div 
                community-tooltip
                data-id-field="{{ ::message.id }}" 
                ajax-populate="vm.getMessageData" 
                tooltip-template="forums/list/forums.list.messagetooltip.html"
                local-data="{ messageUrl: vm.getMessageUrl(message.id) }"
                empty-text="This post contains embedded media only.">
                  <a href="{{ vm.getMessageUrl(message.id) }}">{{ ::message.subject | htmlUnescape }}</a>
              </div>
              <div class="forumThreadList__message__by">
                <span>by <a ui-sref="user">{{ ::message.author.login }}</a></span> 
                <span>{{ ::message.postTime | timeFromNow }}</span>
              </div>
            </td>
            <td class="forumThreadList__message__counter">
              {{  message.stats | extractKey : 'views' }}
            </td>
            <td class="forumThreadList__message__counter">
              {{  ( message.stats | extractKey : 'comments') - 1 }}
            </td>
            <td class="community__forum__threadlist__message__counter">
              {{  message.stats | extractKey : 'score' }}
            </td>
            <td class="forumThreadList__message__latest">
              <a>{{ ::message.latestComment.author.login }}</a>
              <span>{{ message.latestComment.postTime | timeFromNow }}</span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

  <div class="forumPagination">
    <div class="row">
        <div class="col--md6">
          <community-pager 
            total-results="vm.messageCount" 
            pager-fn="vm.forumListFilter">
          </community-pager>
        </div>
    </div>
  </div>
</div>
