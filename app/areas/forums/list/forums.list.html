<div class="community__forum__container">

  <div class="row row--comfy">
    <div class="community__forum__descriptor col--md9">
      FORUMS are the central hub of our community discussions and chatter. Voice your opinion, show what you're working on, and check out the cool things others are doing. And remember, we are all here to help each other!
    </div>
    <div class="community__forum__search col--md3">
      <div ng-hide="vm.hideSearch()">
          <community-search 
            search-filter="vm.forumListFilter" 
            placeholder="Search Forum"
            exclude="limit, offset">
         </community-search>
      </div>
    </div>
  </div>

  <div class="row row-comfy">
    <div class="col--md12">
      <div class="community__forum__threadcount ">
        <h4>Showing {{ vm.messageCount }} Results for {{ ::vm.currentNode.name }}</h4>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col--md12">
      <community-sort sort-options="vm.messageSortOptions" sort-filter="vm.forumListFilter" sort-exclude="limit, offset" class="community__sort"></community-sort>
    </div>
  </div>


  <div class="row">
    <div class="col--md12">

      <table class="community__forum__threadlist">
        <colgroup>
          <col style="width:50%">
          <col style="width:11%">
          <col style="width:11%">
          <col style="width:11%">
          <col style="width:auto">
        </colgroup>

        <thead class="community__forum__threadlist__head">
          <th class="community__forum__threadlist__head__topic">Topic</th>
          <th class="community__forum__threadlist__head__counter">Views</th>
          <th class="community__forum__threadlist__head__counter">Comments</th>
          <th class="community__forum__threadlist__head__counter">Kudos</th>
          <th class="community__forum__threadlist__head__reply">Latest Reply</th>
        </thead>

        <tbody class="community__forum__threadlist__body">
          <tr ng-repeat="message in vm.messageList">

            <td class="community__forum__threadlist__body__topic">
              <a ui-sref="forums.message({messageId: message.id})">
                <div 
                  community-tooltip
                  data-id-field="{{ ::message.id }}" 
                  ajax-populate="vm.getMessageData" 
                  tooltip-template="forums/list/forums.list.messagetooltip.html">
                  <a ui-sref="forums.message({messageId: message.id})">{{ ::message.subject }}</a>
                </div>
              </a>
              <span>by <a class="appType--micro" ui-sref="user">{{ ::message.author.login }}</a> <span>{{ ::message.postTime | timeFromNow }}</span></span>
            </td>

            <td class="community__forum__threadlist__body__counter">
              {{  message.stats | extractKey : 'views' }}
            </td>
            <td class="community__forum__threadlist__body__counter">
              {{  message.stats | extractKey : 'comments' }}
            </td>
            <td class="community__forum__threadlist__body__counter">
              {{  message.stats | extractKey : 'kudos' }}
            </td>

            <td><a>{{ ::message.latestReply.author.login }}</a><br /> {{ message.latestReply.postTime | timeFromNow }}</td>
          </tr>
        </tbody>
      </table>


    </div>
  </div>

</div>
