
<div class="cmuForumThreadlist cmuThreadlist">

  <div class="cmuThreadlist__ctrl">

    <div class="cmuThreadlist__filters row">
      <div class="col--md8 noPaddingLeft" community-permissions>
        <button class="button--solid" ng-click="vm.startNewTopic()">Create a Topic</button>
      </div>

      <div class="col--md2">
        <div ng-hide="vm.hideSearch()">
            <community-search 
              search-filter="vm.forumListFilter" 
              placeholder="Filter Topics"
              exclude="limit, offset">
           </community-search>
        </div>
      </div>

      <div class="col--md2 noPaddingRight">
        <community-sort sort-options="vm.messageSortOptions" sort-filter="vm.forumListFilter" sort-exclude="limit, offset" class="community__sort"></community-sort>
      </div>

    </div>

    <div class="cmuThreadlist__listInfo row">

      <div class="col--md8 noPaddingLeft">
        <div class="cmuThreadlist__listInfo__count">Showing 30 out of {{ vm.messageCount | number}} topics for {{ ::vm.currentNode.name }}
        <!-- </div> -->
        <!-- <div class="forumThreadCount__message">Showing page ## out of 178 pages for {{ ::vm.currentNode.name }} -->
        </div>
      </div>

      <div class="col--md4 noPaddingRight">
        <community-pager 
          total-results="vm.messageCount" 
          pager-fn="vm.forumListFilter"
          front-biased="true">
        </community-pager>
      </div>
    </div>

  </div>





  <div class="cmuThreadlist__list">
    <div class="row">
      <table>
        <thead>
          <th class="cmuThreadlist__thead--topic">Topic</th>
          <th class="cmuThreadlist__thead--author">Author</th>
          <th class="cmuThreadlist__thead--createdDate">Created</th>
          <th class="cmuThreadlist__thead--counter
                     cmuThreadlist__thead--views"></th>
          <th class="cmuThreadlist__thead--counter
                     cmuThreadlist__thead--replies"></th>
          <th class="cmuThreadlist__thead--counter
                     cmuThreadlist__thead--kudos"></th>
          <th class="cmuThreadlist__thead--authorLast">Latest Reply</th>
          <th class="cmuThreadlist__thead--latestDate">Latest Date</th>
        </thead>


        <!-- 

          FPO PLACEHOLDER CONTENT

         -->

                        <tbody class="cmuThreadlist__pinnedList">
                          <tr class="cmuThreadList__row
                                      cmuThreadList__row--locked
                                      cmuThreadList__row--pinned cmuThreadList__row--active">
                            <td class="cmuThreadList__row__topic">
                              <a>FPO pinned subject unread, locked, active</a>
                            </td>
                            <td class="cmuThreadList__row__author">
                              <a ui-sref="user">author</a>
                            </td>
                            <td class="cmuThreadList__row__createdDate">
                              12-20-2010
                            </td>
                            <td class="cmuThreadList__row__counter">
                              123
                            </td>
                            <td class="cmuThreadList__row__counter">
                              123
                            </td>
                            <td class="cmuThreadList__row__counter">
                              123
                            </td>
                            <td class="cmuThreadList__row__authorLast">
                              <a>author</a>
                            </td>
                            <td class="cmuThreadList__row__latestDate">12-20-2010
                            </td>
                          </tr>
                          <tr class="cmuThreadList__row
                                      cmuThreadList__row--pinned 
                                      cmuThreadList__row--read
                                      cmuThreadList__row--locked
                                      ">
                            <td class="cmuThreadList__row__topic">
                              <a>FPO pinned subject read locked</a>
                            </td>
                            <td class="cmuThreadList__row__author">
                              <a ui-sref="user">author</a>
                            </td>
                            <td class="cmuThreadList__row__createdDate">
                              12-20-2010
                            </td>
                            <td class="cmuThreadList__row__counter">
                              123
                            </td>
                            <td class="cmuThreadList__row__counter">
                              123
                            </td>
                            <td class="cmuThreadList__row__counter">
                              123
                            </td>
                            <td class="cmuThreadList__row__authorLast">
                              <a>author</a>
                            </td>
                            <td class="cmuThreadList__row__latestDate">12-20-2010
                            </td>
                          </tr>
                        </tbody>


        <tbody>
          <tr class="cmuThreadList__row
                     cmuThreadList__row--read">
            <td class="cmuThreadList__row__topic">
              <a>FPO Read subject</a>
            </td>
            <td class="cmuThreadList__row__author">
              <a ui-sref="user">author</a>
            </td>
            <td class="cmuThreadList__row__createdDate">
              12-20-2010
            </td>
            <td class="cmuThreadList__row__counter">
              123
            </td>
            <td class="cmuThreadList__row__counter">
              123
            </td>
            <td class="cmuThreadList__row__counter">
              123
            </td>
            <td class="cmuThreadList__row__authorLast">
              <a>author</a>
            </td>
            <td class="cmuThreadList__row__latestDate">12-20-2010
            </td>
          </tr>
          <tr class="cmuThreadList__row
                    cmuThreadList__row--read">
            <td class="cmuThreadList__row__topic">
              <a>FPO Read subject 2</a>
            </td>
            <td class="cmuThreadList__row__author">
              <a ui-sref="user">author</a>
            </td>
            <td class="cmuThreadList__row__createdDate">
              12-20-2010
            </td>
            <td class="cmuThreadList__row__counter">
              123
            </td>
            <td class="cmuThreadList__row__counter">
              123
            </td>
            <td class="cmuThreadList__row__counter">
              123
            </td>
            <td class="cmuThreadList__row__authorLast">
              <a>author</a>
            </td>
            <td class="cmuThreadList__row__latestDate">12-20-2010
            </td>
          </tr>



          <tr class="cmuThreadList__row" ng-repeat="message in vm.messageList" ng-click="vm.go(message)">
            <td class="cmuThreadList__row__topic">
              {{ ::message.subject | htmlUnescape }}
              <div 
                class="cmuTooltip cmuThreadList__tooltip"
                community-tooltip
                data-id-field="{{ ::message.id }}" 
                ajax-populate="vm.getMessageData" 
                tooltip-template="forums/list/forums.list.messagetooltip.html"
                local-data="{ messageUrl: vm.getMessageUrl(message.id) }"
                empty-text="This post only contains images or video."
              ><span class="icon ubnt-icon--eye2"</div>
            </td>
            <td class="cmuThreadList__row__author">
              <!-- <a ui-sref="user">{{ ::message.author.login }}</a> -->
              <community-username user="message.author"></community-username>
            </td>
            <td class="cmuThreadList__row__createdDate">{{ ::message.postTime | timeFromNow }}
            </td>
            <td class="cmuThreadList__row__counter cmuThreadList__row__counter--views" title="views">
              {{  message.stats | extractKey : 'views' | number}}
            </td>
            <td class="cmuThreadList__row__counter" title="comments">
              {{  ( message.stats | extractKey : 'comments') - 1  | number}}
            </td>
            <td class="cmuThreadList__row__counter" title="kudos">
              {{  message.stats | extractKey : 'score'  | number}}
            </td>
            <td class="cmuThreadList__row__authorLast">
              <community-username user="message.latestComment.author"></community-username>
              <!-- <span class="cmuThreadlist__date">04-24-2015, 03:42 PM</span> -->
            </td>
            <td class="cmuThreadList__row__latestDate">{{ message.latestComment.postTime | timeFromNow }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="forumPagination">
    <div class="row">
        <div class="col--md8 noPaddingLeft">
          <button class="button--solid" ng-click="vm.startNewTopic()" community-permissions>Create a Topic</button>
        </div>
        <div class="col--md4 noPaddingLeft">
          <community-pager 
            total-results="vm.messageCount" 
            pager-fn="vm.forumListFilter"
            front-biased="true">
          </community-pager>
        </div>
    </div>
  </div>

  <div class="forumThreadControl forumThreadControl--bottom">
    <div class="row">
      <div class="forumThreadControl__row">
        <div class="col--md8 noPaddingLeft">
        </div>

        <div class="col--md2">

        </div>

        <div class="col--md2 noPaddingRight">
          <page-scroll></page-scroll>
        </div>

      </div>
    </div>
  </div>

</div>
