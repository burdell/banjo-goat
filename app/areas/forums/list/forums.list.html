<div class="cmuForumContainer">
  <div class="forumThreadControl">
    <div class="row">

      <div class="forumThreadControl__row">
        <div class="col--md8 noPaddingLeft" community-permissions>
          <button class="button--solid" ng-click="vm.startNewTopic()">Create a Topic</button>
        </div>

        <div class="col--md2">
          <div ng-hide="vm.hideSearch()">
              <community-search 
                search-filter="vm.forumListFilter" 
                placeholder="Filter Topics"
                exclude="limit, offset">
             </community-search>
          </div>
        </div>

        <div class="col--md2 noPaddingRight">
          <community-sort sort-options="vm.messageSortOptions" sort-filter="vm.forumListFilter" sort-exclude="limit, offset" class="community__sort"></community-sort>
        </div>

      </div>
    </div>
  </div>


  <div class="forumThreadCount">
    <div class="row">

      <div class="forumThreadCount__row col--md8 noPaddingLeft">
        <div class="forumThreadCount__message">Showing 30 out of {{ vm.messageCount | number}} topics for {{ ::vm.currentNode.name }}
        <!-- </div> -->
        <!-- <div class="forumThreadCount__message">Showing page ## out of 178 pages for {{ ::vm.currentNode.name }} -->
        </div>
      </div>

      <div class="col--md4 noPaddingRight">
        <community-pager 
          total-results="vm.messageCount" 
          pager-fn="vm.forumListFilter"
          front-biased="true">
        </community-pager>
      </div>
    </div>
  </div>

  <div class="forumThreadList">
    <div class="row">
      <table>
        <thead>
          <th class="forumThreadList__head--topic">Topic</th>
          <th class="forumThreadList__head--author">Author</th>
          <th class="forumThreadList__head--createdDate">Created</th>
          <th class="forumThreadList__head--counter forumThreadList__head--counter--views">Views</th>
          <th class="forumThreadList__head--counter">Replies</th>
          <th class="forumThreadList__head--counter">Kudos</th>
          <th class="forumThreadList__head--authorLast">Latest Reply</th>
          <th class="forumThreadList__head--latestDate">Latest Date</th>
        </thead>

        <tbody class="forumThreadList--pinList">
          <tr class="forumThreadList__message
                      forumThreadList__message--locked
                      forumThreadList__message--pinned forumThreadList__message--active">
            <td class="forumThreadList__message__topic">
              <a 
                community-tooltip
                data-id-field="{{ ::message.id }}"
                tooltip-template="forums/list/forums.list.messagetooltip.html"
                local-data="FPO"
                ui-sref="forums.message({messageId: message.id})">FPO pinned subject unread, locked, active</a>
            </td>
            <td class="forumThreadList__message__author">
              <a ui-sref="user">author</a>
            </td>
            <td class="forumThreadList__message__createdDate">
              12-20-2010
            </td>
            <td class="forumThreadList__message__counter">
              123
            </td>
            <td class="forumThreadList__message__counter">
              123
            </td>
            <td class="forumThreadList__message__counter">
              123
            </td>
            <td class="forumThreadList__message__authorLast">
              <a>author</a>
            </td>
            <td class="forumThreadList__message__latestDate">12-20-2010
            </td>
          </tr>
          <tr class="forumThreadList__message
                      forumThreadList__message--pinned 
                      forumThreadList__message--read
                      forumThreadList__message--locked
                      ">
            <td class="forumThreadList__message__topic">
              <a 
                community-tooltip
                data-id-field="{{ ::message.id }}"
                tooltip-template="forums/list/forums.list.messagetooltip.html"
                local-data="FPO"
                ui-sref="forums.message({messageId: message.id})">FPO pinned subject read locked</a>
            </td>
            <td class="forumThreadList__message__author">
              <a ui-sref="user">author</a>
            </td>
            <td class="forumThreadList__message__createdDate">
              12-20-2010
            </td>
            <td class="forumThreadList__message__counter">
              123
            </td>
            <td class="forumThreadList__message__counter">
              123
            </td>
            <td class="forumThreadList__message__counter">
              123
            </td>
            <td class="forumThreadList__message__authorLast">
              <a>author</a>
            </td>
            <td class="forumThreadList__message__latestDate">12-20-2010
            </td>
          </tr>
        </tbody>


        <tbody>
          <tr class="forumThreadList__message
                    forumThreadList__message--read">
            <td class="forumThreadList__message__topic">
              <a 
                community-tooltip
                data-id-field="{{ ::message.id }}"
                tooltip-template="forums/list/forums.list.messagetooltip.html"
                local-data="FPO"
                ui-sref="forums.message({messageId: message.id})">FPO Read subject</a>
            </td>
            <td class="forumThreadList__message__author">
              <a ui-sref="user">author</a>
            </td>
            <td class="forumThreadList__message__createdDate">
              12-20-2010
            </td>
            <td class="forumThreadList__message__counter">
              123
            </td>
            <td class="forumThreadList__message__counter">
              123
            </td>
            <td class="forumThreadList__message__counter">
              123
            </td>
            <td class="forumThreadList__message__authorLast">
              <a>author</a>
            </td>
            <td class="forumThreadList__message__latestDate">12-20-2010
            </td>
          </tr>
          <tr class="forumThreadList__message
                    forumThreadList__message--read">
            <td class="forumThreadList__message__topic">
              <a 
                community-tooltip
                data-id-field="{{ ::message.id }}"
                tooltip-template="forums/list/forums.list.messagetooltip.html"
                local-data="FPO"
                ui-sref="forums.message({messageId: message.id})">FPO Read subject 2</a>
            </td>
            <td class="forumThreadList__message__author">
              <a ui-sref="user">author</a>
            </td>
            <td class="forumThreadList__message__createdDate">
              12-20-2010
            </td>
            <td class="forumThreadList__message__counter">
              123
            </td>
            <td class="forumThreadList__message__counter">
              123
            </td>
            <td class="forumThreadList__message__counter">
              123
            </td>
            <td class="forumThreadList__message__authorLast">
              <a>author</a>
            </td>
            <td class="forumThreadList__message__latestDate">12-20-2010
            </td>
          </tr>
          <tr class="forumThreadList__message" ng-repeat="message in vm.messageList">
            <td class="forumThreadList__message__topic">
              <a  
                community-tooltip
                data-id-field="{{ ::message.id }}" 
                ajax-populate="vm.getMessageData" 
                tooltip-template="forums/list/forums.list.messagetooltip.html"
                local-data="{ messageUrl: vm.getMessageUrl(message.id) }"
                empty-text="This post only contains images or video."
                href="{{ vm.getMessageUrl(message.id) }}">
                  {{ ::message.subject | htmlUnescape }}
              </a>
            </td>
            <td class="forumThreadList__message__author">
              <!-- <a ui-sref="user">{{ ::message.author.login }}</a> -->
              <community-username user="message.author"></community-username>
            </td>
            <td class="forumThreadList__message__createdDate">{{ ::message.postTime | timeFromNow }}
            </td>
            <td class="forumThreadList__message__counter forumThreadList__message__counter--views" title="views">
              {{  message.stats | extractKey : 'views' | number}}
            </td>
            <td class="forumThreadList__message__counter" title="comments">
              {{  ( message.stats | extractKey : 'comments') - 1  | number}}
            </td>
            <td class="forumThreadList__message__counter" title="kudos">
              {{  message.stats | extractKey : 'score'  | number}}
            </td>
            <td class="forumThreadList__message__authorLast">
              <community-username user="message.latestComment.author"></community-username>
              <!-- <span class="forumThreadList__date">04-24-2015, 03:42 PM</span> -->
            </td>
            <td class="forumThreadList__message__latestDate">{{ message.latestComment.postTime | timeFromNow }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="forumPagination">
    <div class="row">
        <div class="col--md8 noPaddingLeft">
          <button class="button--solid" ng-click="vm.startNewTopic()" community-permissions>Create a Topic</button>
        </div>
        <div class="col--md4 noPaddingLeft">
          <community-pager 
            total-results="vm.messageCount" 
            pager-fn="vm.forumListFilter"
            front-biased="true">
          </community-pager>
        </div>
    </div>
  </div>

  <div class="forumThreadControl forumThreadControl--bottom">
    <div class="row">
      <div class="forumThreadControl__row">
        <div class="col--md8 noPaddingLeft">
        </div>

        <div class="col--md2">

        </div>

        <div class="col--md2 noPaddingRight">
          <page-scroll></page-scroll>
        </div>

      </div>
    </div>
  </div>

</div>
