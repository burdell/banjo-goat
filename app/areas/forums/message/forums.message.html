
<!-- TESTING STYLE -->
 <style type="text/css" scoped>
    div.forumThreadMessage__linked
    {
      background-color: magenta;
    }
  </style>
<!-- TESTING STYLE -->

<div class="forumThread__subject
	          forumThread__subject--locked
	          forumThread__subject--active">
	<div class="row">
		<h3>{{ ::vm.originalMessage.subject | htmlUnescape }}</h3>
	</div>
</div>

<div class="forumThreadControl">
	<div class="row">
        <div class="col--md8 noPaddingLeft">
        	<button class="button--solid button-blue-white">Post Reply</button>
			<button class="button--ghost button-black-on-white">Follow Topic</button>
		</div>

		<div class="col--md4 noPaddingRight">
			<community-pager 
			  total-results="vm.allMessageCount" 
			  pager-fn="vm.messageThreadFilter">
			</community-pager>
		</div>
    </div>
</div>


<div class="forumThreadContainer">
	<div class="forumThreadMessage" ng-repeat="message in vm.messageThread">
		<div class="row" id="{{ message.id }}">
			<div class="forumThreadMessage__row">
				<!-- message -->
				<community-user-badge user="message.author"></community-user-badge>

				<!-- <div class="forumThreadMessage__main col--md10" ng-class="{  forumThreadMessage__linked : vm.linkedMessageId == message.id }"> -->
				<div class="forumThreadMessage__body" ng-class="{  forumThreadMessage__linked : vm.linkedMessageId == message.id }">
					<div class="forumThreadMessage__header">
						<div class="row">
							<div class="col--md6">
								<div class="forumThreadMessage__messageTopic">{{ ::vm.originalMessage.subject | htmlUnescape }}</div>
							</div>
							<div class="col--md6 alignRight">
								<div class="forumThreadMessage__messageCounter"></div>
								<div class="forumThreadMessage__date">{{ message.postTime | exactTimeFromNow }}</div>
							</div>
						</div>
					</div>
					<div class="forumThreadMessage__content" ng-bind-html="message.body | sanitize">
					</div>
					<div class="forumThreadMessage__signature">
						<div>
							WHT = Short Form Acronym for "You couldn't handle me even if I came with instructions!"<br><font color="#0000FF"><strong><em>Well engineered projects are indistinguishable from crazy ideas. </em></strong></font><br><br>Speed, distance, reliability, cost...Pick three.<br>...World's First Ubiquiti AirMax WISP....
						</div>
					</div>

					<div class="forumThreadMessage__controls"> 
						<div class="forumThreadMessage__controls--vote col--md4 noPadding">
							<!-- <button class="button--compound">
								<div class="button--compound--data">123{{ message.stats | extractKey : 'kudos' }} kudos</div><div class="button--compound--action">
									<span class="icon ubnt-icon--plus">KUDOS</span>
									+1
								</div>
							</button>
							<button class="button--compound">
								<div class="button--compound--data"><span class="icon ubnt-icon--tools"></span></div><div class="button--compound--action">
									<span class="icon ubnt-icon--plus">KUDOS</span>
									Helpful
								</div>
							</button> -->
							<!-- <button class="forumThreadMessage__brilliant button--compound-naked button-white-green">
								<div class="button--compound--data"><span class="icon ubnt-icon--tools"></span></div><div class="button--compound--action">
									<!-- <span class="icon ubnt-icon--bulb"></span> -->
									<!-- <span class="icon ubnt-icon--tools"></span> -->
									<!-- + Helpful -->
								<!-- </div> -->
							<!-- </button> -->
						</div>
						<div class="forumThreadMessage__controls--reply col--md8 noPadding">
							<button class="button--kudos button--compound-naked" data-val="321">
								<span>123</span> kudos
								<!-- <div class="button--compound--data">123{{ message.stats | extractKey : 'kudos' }} kudos</div><div class="button--compound--action"> -->
									<!-- <span class="icon ubnt-icon--plus">KUDOS</span> -->
									<!-- +1 -->
								<!-- </div> -->
							</button>
							<button class="button--compound-naked">
								<span class="icon ubnt-icon--tools"></span> Helpful
								<!-- <div class="button--compound--data"><span class="icon ubnt-icon--tools"></span></div> -->
								<!-- <div class="button--compound--action"> -->
									<!-- <span class="icon ubnt-icon--plus">KUDOS</span> -->
									<!-- Helpful -->
								<!-- </div> -->
							</button>
							<button 
								class="button--solid button-white-on-blue" 
								ng-click="vm.showReply(message.id)"
								ng-disabled="vm.messageIsBeingRepliedTo(message.id)">
									Reply
							</button>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- reply -->
		<div class="row row--comfy" ng-show="vm.messageIsBeingRepliedTo(message.id)">
			<div class="col--md2">
				</div>
				<div class="col--md10">
					<h6>REPLY to <a href="#">{{ ::message.author.login }}</a></h6>
					<div class="row row--comfy">
						<community-text-editor ng-model="vm.messageReplyText"></community-text-editor>
					</div>
					<div>
						<button 
							class="button-ghost button-white-blue" 
							ng-click="vm.cancelReply()">
								Cancel
						</button>
						<button 
							class="button-full button-blue-white"
							ng-click="vm.submitReply(message.id)">
								Submit Comment
						</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>


<div class="forumThreadMessage__main__bottomControls">
	<div class="row">
        <div class="col--md8 noPaddingLeft">
        	<button class="button--solid button-blue-white">Post Reply</button>
			<button class="button--ghost button-black-on-white">Follow Topic</button>
		</div>
		<div class="col--md4 noPaddingRight">
			<community-pager 
			  total-results="vm.allMessageCount" 
			  pager-fn="vm.messageThreadFilter">
			</community-pager>
		</div>
	</div>
</div>


<div class="forumThread__viewCounter">
	<div class="row">
		<div class="activeCounter">
			<span>{{ vm.originalMessage.stats | extractKey : 'currentlyViewing' }}</span><span>other people are viewing this thread</span>
		</div>
	</div>
</div>
