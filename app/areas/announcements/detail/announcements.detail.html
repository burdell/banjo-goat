<div class="cmuAnnouncementsDetails cmuThread">

	<div class="row">
	
		<div class="row">
			<div class="col--md12">
				<div class="cmuThread__subject">
					<div class="row">

						<div class="col--md12">
							<h3>{{ vm.currentAnnouncement.context.topicSubject | htmlUnescape}}</h3> 
							<div class="cmuThread__stats ">
								<div class="cmuThread__stat">
									<span class="cmuThread__stat__desc">${{ core.product }}$:</span>
									<span class="cmuThread__stat__status">{{ ::vm.productName }}</span>
								</div>
								<div class="cmuThread__stat" ng-if="::vm.currentAnnouncement.meta.versionNumber">
									<span class="cmuThread__stat__desc">${{ core.version }}$:</span>
									<span class="cmuThread__stat__status">{{ ::vm.currentAnnouncement.meta.versionNumber }}</span>
								</div>
								<div class="cmuThread__stat" ng-if="::vm.currentAnnouncement.meta.productModel">
									<span class="cmuThread__stat__desc">${{ core.model }}$:</span>
									<span class="cmuThread__stat__status">{{ ::vm.currentAnnouncement.meta.productModel }}</span>
								</div>

								<span class="cmuThread__subject__date">{{ vm.currentAnnouncement.postDate | exactTimeFromNow }} <span class="cmuThread__subject__date--edited" ng-if="vm.isEdited">Edited {{ vm.currentAnnouncement.editDate | exactTimeFromNow }}</span></span>
							</div>
						</div>

					</div>
				</div>

				<div class="cmuThread__stats">
					<div class="row">
						<div class="col--md12">
							<community-reaction
								reaction-type="kudo" 
								reaction-count="vm.currentAnnouncement.scores.kudoCount"></community-reaction>

							<span community-permissions="message.can_edit_message">
								<a class="button button--ghost" 
									area-link-handler="{{ vm.editUrl }}">
									<span class="icon ubnt-icon--pencil-2"></span>
									<span>${{ announcements.detail.edit }}$</span>
								</a>
							</span>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="cmuThread__firstPost clearfix">
			<community-user-badge 
				class="cmuUserbadge--thin"
				user="vm.currentAnnouncement.insertUser"
				op-id="messageDisplay.showOp">
			</community-user-badge>

			<div class="announcementThread__post cmuThread__post">

				<div class="cmuMessage__content cmuContent" ng-bind-html="vm.currentAnnouncement.body | sanitize:vm.currentAnnouncement.format">
				</div>

				<div class="highlight">
					<div>New:</div>
					<div>- New: Data rate module: Alternative data rate algorithm option</div>
					<div>- New: WEB UI: Audio option for Antenna Alignment Tool</div>
					<div>- New: WEB UI: "Feed only - 3dBi" option for antenna type (AirGrid and NanoBridge models only)</div>
				</div>

				<div ng-if="vm.currentAnnouncement.attachments.length > 0">
					<h6>Attachments:</h6>
					<div ng-repeat="attachment in vm.currentAnnouncement.attachments">
	          			<a ng-href="{{ attachment.fileUrl }}" target="self">{{ attachment.fileName }}</a>
					</div>
				</div>
			</div>

		</div>
	</div>

	<div class="row">
		<community-reaction
			reaction-type="kudo" 
			reaction-count="vm.currentAnnouncement.scores.kudoCount"></community-reaction>

		<span community-permissions="message.can_edit_message" denied-behavior="hide">
			<a  class="button button--ghost" 
				area-link-handler="{{ vm.editUrl }}">
				<span class="icon ubnt-icon--pencil-2"></span>
				<span>${{ announcements.detail.edit }}$</span>
			</a>
			</span>
	</div>

	<div class="row" community-permissions="message.can_comment" denied-behavior="hide">
		<community-comment-form
			autofocus="false"
			minimal-editor="true"
			toggle-attribute="true"
			parent-message="vm.currentAnnouncement"
			comment-list="vm.currentComments"
			autofocus="false" 
			header-title="${{ directives.commentform.postNewComment }}$"
			reply-button-text="${{ directives.commentform.postComment }}$" 
			replying-button-text="${{ directives.commentform.postingComment }}$...">
		</community-comment-form>
	</div>
		
	<div class="row">
		<community-comment-list
			current-comments="vm.currentComments"
			comment-filter="vm.moreCommentsFilter">
		</community-comment-list>
	</div>
	
</div>
