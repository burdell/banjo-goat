
<div class="cmuTimeline" >


	<div class="row" ng-if="timeline.timelineData.length < 1">
		<h2 class="cmuHalfRow col--md12"> ${{ announcements.list.emptyList }}$ </h2>
	</div>

	<div class="timeline__container cmuCollapser__container" ng-repeat="yearData in timeline.timelineData">
		<div class="timeline__title cmuCollapser__header" ng-class='{open:$first || openAll()}' 
		community-class-toggle="open">
			<div class="timeline__title__text cmuCollapser__header__text">{{ yearData.year }} 
				<span class="timeline__title__count">{{ yearData.count }}</span>
			</div>
		</div>
		
		<!-- remove cmuTimeline__showheader to hide table headers (benefits lists w/ 10 or fewer) -->
		<div class="cmuTimeline__list 
					cmuThreadlist__list
					cmuTimeline__showheader
					cmuCollapser__content">

			<div class="cmuTimeline__month" ng-repeat="monthData in yearData.yearData">
		    <div class="cmuThreadlist__table"> 

		      <div class="cmuThreadlist__headers">
		        <div class="cmuThreadlist__topic">{{ monthData.monthDisplay }} {{ yearData.year }}</div>
		        <div class="cmuThreadlist__authorDate">${{ directives.timeline.created }}$</div>
		        <div class="cmuThreadlist__counter 
                    cmuThreadlist__views 
                    visible--smUp">
		          <span class="visible--mdUp">${{ core.views }}$</span>
		          <span class="visible--smDown">${{ core.v }}$</span>
		        </div>
		        <div class="cmuThreadlist__counter
                    cmuThreadlist__replies visible--smUp">
		          <span class="visible--mdUp">${{ core.replies }}$</span>
		          <span class="visible--smDown">${{ core.r }}$</span>
		        </div>
		        <div class="cmuThreadlist__counter 
		                    cmuThreadlist__kudos visible--smUp">
		          <span class="visible--mdUp">${{ core.kudos }}$</span>
		          <span class="visible--smDown">${{ core.k }}$</span>
		        </div>
		      </div>


		      <div class="cmuThreadlist__body">
		        <div class="cmuThreadlist__row" 
		          	ng-repeat="data in monthData.monthData"
		            ng-class="{'isRead':timeline.isRead(data)}">

		          <a area-link-handler="{{ timeline.getTimelineHref(data) }}">
			          <div class="cmuThreadlist__topic">
			          	<span class="cmuThreadlist__topic__title">{{ data.subject | htmlUnescape }}</span> 
				        	<span ng-if="timeline.showProductInfo"><product-discussion-tag node-id="data.topic.node.id"></product-discussion-tag></span>
			          </div>
			        </a>
<!-- 
		          <div class="cmuThreadlist__created cmuThreadlist__authorDate">
		            <div class="cmuThreadlist__avatar"> 
		              <community-user-badge class="cmuUserbadge--showFlag cmuUserbadge--avatarOnly" user="data.topic.message.insertUser"></community-user-badge>
		            </div>
		            
		            <div class="cmuThreadlist__date">{{ ::data.topic.message.postDate | timeFromNow }}
		            </div>
		          </div>
		           -->
<!-- 
		          <a 
		            area-link-handler="{{ timeline.getProfileUrl(data.topic.message.insertUser.id) }}"
		            class="visible--xlgUp"
		            > -->
		          <a 
		            area-link-handler="{{ timeline.getProfileUrl(data.message.insertUser.id) }}"
		            class=""
		            >
		            <div class="cmuThreadlist__created
		                        cmuThreadlist__authorName">
		              <div class="cmuThreadlist__avatar">
		                <div
		                  community-tooltip
		                  data-id-field="{{ data.message.insertUser.id }}" 
		                  ajax-populate="timeline.getUserData" 
		                  tooltip-template="partials/usertooltip.html"
		                  empty-text="${{ forums.list.emptyPreview }}$"
		                  tooltip-class="cmuTooltipster"
		                  position="top"
		                >
		                  <community-user-avatar user="data.message.insertUser"></community-user-avatar>
		                  <span>{{ data.message.insertUser.login }}</span>
		                </div>
		              </div>
		            </div>
		          </a>
<!-- 
		          <a 
		            area-link-handler="{{ timeline.getProfileUrl(message.topic.message.insertUser.id) }}" 
		            class="visible--smUp">
		            <div class="cmuThreadlist__authorDateCreated cmuThreadlist__created">
		              <div class="cmuThreadlist__avatar visible--lgDown"> 
		                <span 
		                  community-tooltip
		                  data-id-field="{{ message.topic.message.insertUser.id }}" 
		                  ajax-populate="vm.getUserData" 
		                  tooltip-template="forums/list/forums.list.usertooltip.html"
		                  empty-text="${{ forums.list.emptyPreview }}$"
		                  tooltip-class="cmuTooltipster"
		                  position="top"
		                >
		                  <community-user-avatar user="message.topic.message.insertUser"></community-user-avatar>
		                </span>
		              </div>
		              <div class="cmuThreadlist__authorDate">{{ ::message.topic.message.postDate | timeFromNow }}</div>
		            </div>
		          </a>
 -->
		          <a area-link-handler="{{ timeline.getTimelineHref(data) }}">
			          <div class="cmuThreadlist__counter cmuThreadlist__views">
			            {{ data.countViews | number}}
			          </div>
			        </a>
		          <a area-link-handler="{{ timeline.getTimelineHref(data) }}">
			          <div class="cmuThreadlist__counter cmuThreadlist__replies">
			            {{  data.context.totalMessageCount - 1 | number}}
			          </div>
			        </a>
		          <a area-link-handler="{{ timeline.getTimelineHref(data) }}">
			          <div class="cmuThreadlist__counter cmuThreadlist__kudos">
			            {{  data.message.scores.kudoCount | number}}
			          </div>
			        </a>
		        </div>
		      </div>
		    </div>
		  </div>

		  <div class="cmuTimeline__month" ng-repeat="monthData in yearData.yearData"></div>
		</div>
	</div>
</div>