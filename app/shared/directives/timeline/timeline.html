
<div class="cmuTimeline" >

	<div class="timeline__container cmuCollapser__container" ng-repeat="yearData in timeline.timelineData">
		<div class="timeline__title cmuCollapser__header" ng-class='{open:$first || openAll()}' 
		community-class-toggle="open">
			<div class="timeline__title__text cmuCollapser__header__text">{{ yearData.year }} 
				<span class="timeline__title__count">{{ yearData.count }}</span>
			</div>
		</div>
		
		<!-- remove cmuTimeline__showheader to hide table headers (benefits lists w/ 10 or fewer) -->
		<div class="cmuTimeline__list 
					cmuThreadlist__list
					cmuTimeline__showheader
					cmuCollapser__content
					"
					>

			<div class="cmuTimeline__month" ng-repeat="monthData in yearData.yearData">
		    <div class="cmuThreadlist__table"> 

		      <div class="cmuThreadlist__headers">
		        <div class="cmuThreadlist__topic">Topic</div>
		        <div class="cmuThreadlist__authorDate">Created</div>
		        <div class="cmuThreadlist__counter cmuThreadlist__views"></div>
		        <div class="cmuThreadlist__counter cmuThreadlist__replies"></div>
		        <div class="cmuThreadlist__counter cmuThreadlist__kudos"></div>
		      </div>


		      <div class="cmuThreadlist__body">
		        <a class="cmuThreadList__row" 
		            area-link-handler="{{ timeline.getMessageUrl(data) }}"
		            ng-repeat="data in monthData.monthData"
		            ng-class="{'isRead':timeline.isRead(data)}"
		            >

		          <div class="cmuThreadlist__topic">
		          	{{ data.topic.subject | htmlUnescape }}
		            <!-- <span ng-if="timeline.isRead(data)">*</span> -->
		          </div>

		          <div class="cmuThreadlist__created cmuThreadlist__authorDate">
		            <div class="cmuThreadlist__avatar"> 
		              <community-user-badge class="cmuUserbadge--showFlag cmuUserbadge--showUser" user="data.topic.message.insertUser"></community-user-badge>
		            </div>
		            
		            <div class="cmuThreadlist__date">{{ ::data.topic.message.postDate | timeFromNow }}
		            </div>
		          </div>
		          
		          <div class="cmuThreadlist__counter cmuThreadlist__views">
		            {{  data.topic.countViews | number}}
		          </div>
		          <div class="cmuThreadlist__counter cmuThreadlist__replies">
		            {{  data.context.totalMessageCount - 1 | number}}
		          </div>
		          <div class="cmuThreadlist__counter cmuThreadlist__kudos">
		            {{  data.topic.message.scores.kudo | number}}
		          </div>

<!-- 
		            <tr class="cmuTimeline__row cmuThreadList__row" ng-repeat="data in monthData.monthData" ng-click="timeline.go(data)">
			          	<td class="cmuThreadList__row__topic">
			          		{{ data.topic.subject }}
			          		<span ng-if="timeline.isRead(data)">*</span>
			          		<span class="cmuTag">{{ data.topic.node.description }}</span>
			          	</td>
			            <td class="cmuThreadList__row__author">
			              <community-user-avatar user="data.topic.message.insertUser"></community-user-avatar>
			            </td>
			            <td class="cmuThreadList__row__createdDate">{{ data.topic.message.postDate | timeFromNow }}
			            </td>
			            <td class="cmuThreadList__row__counter cmuThreadList__row__counter--views" title="views">
			              {{  data.topic.countViews | number}}
			            </td>
			            <td class="cmuThreadList__row__counter" title="comments">
			              {{ data.context.totalMessageCount - 1 | number }}
			            </td>
			            <td class="cmuThreadList__row__counter" title="kudos">
			              {{  data.topic.message.scores.kudo | number }}
			            </td>
			          </tr>

			           -->
<!-- 

		          <div class="cmuThreadlist__created cmuThreadlist__authorDate">
		            <div class="cmuThreadlist__avatar"> 
		              <community-user-badge class="cmuUserbadge--showFlag cmuUserbadge--showUser" user="message.topic.message.insertUser"></community-user-badge>
		            </div>
		            
		            <div class="cmuThreadlist__date">{{ ::message.topic.message.postDate | timeFromNow }}
		            </div>
		          </div>

		          <div class="cmuThreadlist__counter cmuThreadlist__views">
		            {{  message.topic.countViews | number}}
		          </div>
		          <div class="cmuThreadlist__counter cmuThreadlist__replies">
		            {{  message.context.totalMessageCount - 1 | number}}
		          </div>
		          <div class="cmuThreadlist__counter cmuThreadlist__kudos">
		            {{  message.topic.message.scores.kudo | number}}
		          </div>
		           -->
		        </a>
		      </div>







		    </div>
		  </div>


			<div class="cmuTimeline__month" ng-repeat="monthData in yearData.yearData">



<!-- 
				<table>

			        <thead>
			          <th class="cmuThreadlist__thead--topic">{{ monthData.month | monthDisplay }} {{ yearData.year }}</th>
			          <th class="cmuThreadlist__thead--author">Author</th>
			          <th class="cmuThreadlist__thead--createdDate">Created</th>
			          <th class="cmuThreadlist__thead--counter
			                     cmuThreadlist__thead--views"></th>
			          <th class="cmuThreadlist__thead--counter
			          					 cmuThreadlist__thead--replies"></th>
			          <th class="cmuThreadlist__thead--counter
			          					 cmuThreadlist__thead--kudos"></th>
			        </thead>

					<tbody>
			          <tr class="cmuTimeline__row cmuThreadList__row" ng-repeat="data in monthData.monthData" ng-click="timeline.go(data)">
			          	<td class="cmuThreadList__row__topic">
			          		{{ data.topic.subject }}
			          		<span ng-if="timeline.isRead(data)">*</span>
			          		<span class="cmuTag">{{ data.topic.node.description }}</span>
			          	</td>
			            <td class="cmuThreadList__row__author">
			              <community-user-avatar user="data.topic.message.insertUser"></community-user-avatar>
			            </td>
			            <td class="cmuThreadList__row__createdDate">{{ data.topic.message.postDate | timeFromNow }}
			            </td>
			            <td class="cmuThreadList__row__counter cmuThreadList__row__counter--views" title="views">
			              {{  data.topic.countViews | number}}
			            </td>
			            <td class="cmuThreadList__row__counter" title="comments">
			              {{ data.context.totalMessageCount - 1 | number }}
			            </td>
			            <td class="cmuThreadList__row__counter" title="kudos">
			              {{  data.topic.message.scores.kudo | number }}
			            </td>
			          </tr>
					</tbody>
				</table>
 -->
				
			</div>
		</div>
	</div>
</div>